//Copyright (C) Webbu Kobo Tokyo Japan All Rights Reserved
setInterval(timeProg,80);function timeProg(){if(!ctx){alert("Let's Play the game with HTML5 browser!");if(document.documentElement.lang == 'ja')alert("HTML5対応ブラウザで遊んでねっ");flg =error2;}timer++;timerg++;offsetX(canvas);offsetY(canvas);if(flg==preopen){flg=open;}else if(flg==open){setRoad();ctx.clearRect(0,0,320,320);drawTama();ctx.drawImage(simage, 0, 0, 320, 320, 0, 0, 320, 320);flg=ready;}else if(flg==ready){ctx.clearRect(0,0,320,320);drawTama();if(btnFlg == start){ctx.drawImage(aimage, 0, 0, 250, 50, 80, 152, 160, 37);}else if(btnFlg == link){ctx.drawImage(aimage, 0, 0, 250, 50, 90, 295, 140, 25);}ctx.drawImage(simage, 0, 0, 320, 320, 0, 0, 320, 320);ctx.drawImage(yimage, yui_w*(Math.floor(timerg/3)%2), 0, yui_w, yui_h, 20, 140, yui_w, yui_h);$("top_info1").innerHTML = "";}else if(flg==start){setRoad();ctx.clearRect(0,0,320,320);drawTama();$("top_info1").innerHTML = "Hand the men chocolates !";if(document.documentElement.lang == 'ja')$("top_info1").innerHTML = "みんなにチョコを渡してネ";timer=0;flg=touch;}else if(flg==touch){ctx.clearRect(0,0,320,320);drawTama();girlRun();}else if(flg==overInit){$("top_info1").innerHTML = "";ctx.clearRect(0,0,320,320);drawTama();ctx.drawImage(ovimage, 0, 0, 320, 320, 0, 0, 320, 320);btnFlg = over;flg = over;}else if(flg==over){ctx.clearRect(0,0,320,320);drawTama();ctx.drawImage(ovimage, 0, 0, 320, 320, 0, 0, 320, 320);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/8)%2)+5), tama_h, tama_w, tama_h, 60, 100, tama_w, tama_h);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/8)%2)+5), tama_h*2, tama_w, tama_h, 90, 100, tama_w, tama_h);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/8)%2)+5), tama_h*3, tama_w, tama_h, 210, 100, tama_w, tama_h);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/8)%2)+5), tama_h*4, tama_w, tama_h, 170, 100, tama_w, tama_h);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/8)%2)+5), tama_h*5, tama_w, tama_h, 130, 100, tama_w, tama_h);if(btnFlg == start){ctx.drawImage(aimage, 0, 0, 250, 50, 80, 153, 160, 33);}else if(btnFlg == link){ctx.drawImage(aimage, 0, 0, 250, 50, 80, 192, 160, 35);}else if(btnFlg == open){ctx.drawImage(aimage, 0, 0, 250, 50, 80, 232, 160, 35);}}else if(flg==clear){ctx.clearRect(0,0,320,320);drawTama();if(btnFlg == start){ctx.drawImage(aimage, 0, 0, 250, 50, 80, 155, 160, 35);}else if(btnFlg == link){ctx.drawImage(aimage, 0, 0, 250, 50, 80, 192, 160, 35);}else if(btnFlg == open){ctx.drawImage(aimage, 0, 0, 250, 50, 80, 232, 160, 35);}ctx.drawImage(cimage, 0, 0, 320, 320, 0, 0, 320, 320);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/3)%4)+1), tama_h, tama_w, tama_h, 60, 100, tama_w, tama_h);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/3)%4)+1), tama_h*2, tama_w, tama_h, 100, 100, tama_w, tama_h);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/3)%4)+1), tama_h*3, tama_w, tama_h, 200, 100, tama_w, tama_h);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/3)%4)+1), tama_h*4, tama_w, tama_h, 170, 100, tama_w, tama_h);ctx.drawImage(bimage,  tama_w*((Math.floor(timerg/3)%4)+1), tama_h*5, tama_w, tama_h, 130, 100, tama_w, tama_h);}else if(flg==error2){}}